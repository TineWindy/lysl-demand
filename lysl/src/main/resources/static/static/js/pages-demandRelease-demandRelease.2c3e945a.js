(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-demandRelease-demandRelease"],{"04a5":function(t,i,e){"use strict";var a=e("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=a(e("e814")),s=a(e("bfb3"));e("6b54");var o=e("56bc"),l=a(e("999f")),c=a(e("8d4d")),u=a(e("d1e9")),r={components:{fileUpload:l.default,materialSelection:c.default,wPicker:u.default},data:function(){return{picker:null,pickerText:"",description:"",disabled:!1,institution:{type:"HOSPITAL",name:"",province:"",city:"",district:"",address:"",auth:[]},donee:{name:"",phone:"",wxNumber:""},materialList:[{name:"",value:""}],region:["","",""]}},onShow:function(){var t=this;(0,o.fetch)("region/getProvinceList",{},"GET","JSON",function(i){t.region[0]=i,(0,o.fetch)("/region/getCityListByProvinceId",{provinceId:i[0].provinceId},"GET","JSON",function(i){t.region[1]=i})})},methods:{openAddres:function(){this.$refs.wPicker.show()},confirm:function(t){this.picker=t,this.institution.province=t.checkArr[0],this.institution.city=t.checkArr[1],this.institution.district=t.checkArr[2],this.pickerText=t.checkArr.toString()},getMaterial:function(t,i){this.materialList[i].name=t.configValue.materialName,this.materialList[i].item=t},openMaterial:function(t){this.$refs.materialSelection.open(t)},add:function(){this.materialList.push({name:"",value:""})},del:function(t){this.materialList.length>1?this.materialList.splice(t,1):uni.showToast({title:"必须有一个物资"})},verific:function(){return this.institution.name?this.institution.province||this.institution.city||this.institution.district?this.institution.address?!this.institution.auth.length>0?(uni.showToast({icon:"none",title:"请上传图片"}),!1):this.description?this.donee.name?this.donee.phone?/^1[3456789]\d{9}$/.test(this.donee.phone)?(0,s.default)((0,n.default)(this.donee.phone))?(uni.showToast({icon:"none",title:"联系方式只能输入数字"}),!1):this.donee.wxNumber?!this.materialList.length>0?(uni.showToast({icon:"none",title:"请选择捐赠物资"}),!1):this.materialList[0].name&&this.materialList[0].value?!(0,s.default)((0,n.default)(this.materialList[0].value))||(uni.showToast({icon:"none",title:"物资数量输入正整数"}),!1):(uni.showToast({icon:"none",title:"请输入物资名称/数量"}),!1):(uni.showToast({icon:"none",title:"请输入微信号"}),!1):(uni.showToast({icon:"none",title:"手机号码有误，请重填"}),!1):(uni.showToast({icon:"none",title:"请输入联系方式"}),!1):(uni.showToast({icon:"none",title:"请输入联系人姓名"}),!1):(uni.showToast({icon:"none",title:"请输入备注"}),!1):(uni.showToast({icon:"none",title:"请输入详细地址"}),!1):(uni.showToast({icon:"none",title:"请选择城市"}),!1):(uni.showToast({icon:"none",title:"机构名称不可为空"}),!1)},commit:function(){if(this.disabled=!0,this.institution.auth=this.$refs.fileUpload.getImgs(),!this.verific())return this.disabled=!1,!1;var t=this.materialList.map(function(t){return{materialName:t.item.configValue.materialName,materialId:(0,n.default)(t.item.configValue.materialId),materialNum:(0,n.default)(t.value)}}),i={institution:this.institution,donee:this.donee,description:this.description,materials:t};(0,o.fetch)("/demand/insertDemand",i,"POST","JSON",function(t){uni.showToast({icon:"none",title:"需求发布成功"}),setTimeout(function(){(0,o.back)()},1e3)})}}};i.default=r},"097e":function(t,i,e){"use strict";e.r(i);var a=e("5c00"),n=e("545b");for(var s in n)"default"!==s&&function(t){e.d(i,t,function(){return n[t]})}(s);e("badb");var o,l=e("f0c5"),c=Object(l["a"])(n["default"],a["b"],a["c"],!1,null,"49c3f52a",null,!1,a["a"],o);i["default"]=c.exports},"4dc9":function(t,i,e){e("5737"),t.exports=e("584a").Number.isNaN},"545b":function(t,i,e){"use strict";e.r(i);var a=e("04a5"),n=e.n(a);for(var s in a)"default"!==s&&function(t){e.d(i,t,function(){return a[t]})}(s);i["default"]=n.a},5737:function(t,i,e){var a=e("63b6");a(a.S,"Number",{isNaN:function(t){return t!=t}})},"5c00":function(t,i,e){"use strict";var a={materialSelection:e("8d4d").default},n=function(){var t=this,i=t.$createElement,e=t._self._c||i;return e("v-uni-view",{staticClass:"body"},[e("v-uni-view",{staticClass:"p title"},[t._v("一、请填写机构相关信息")]),e("v-uni-view",{staticClass:"p label reuired"},[t._v("1.机构类型")]),e("v-uni-view",{staticClass:"margin-tb-sm text-center"},[e("v-uni-button",{staticClass:"cu-btn ",class:"HOSPITAL"===t.institution.type?"bg-blue":"bg-white",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.institution.type="HOSPITAL"}}},[t._v("医院")]),e("v-uni-button",{staticClass:"cu-btn",class:"SCHOOL"===t.institution.type?"bg-blue":"bg-white",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.institution.type="SCHOOL"}}},[t._v("学校")]),e("v-uni-button",{staticClass:"cu-btn",class:"COMMUNITY"===t.institution.type?"bg-blue":"bg-white",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.institution.type="COMMUNITY"}}},[t._v("社区")]),e("v-uni-button",{staticClass:"cu-btn",class:"OTHER"===t.institution.type?"bg-blue":"bg-white",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.institution.type="OTHER"}}},[t._v("其他")])],1),e("v-uni-view",{staticClass:"p label reuired"},[t._v("2.机构名称")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("请输入机构名称")]),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-input",{staticClass:"my_input_l",attrs:{placeholder:""},model:{value:t.institution.name,callback:function(i){t.$set(t.institution,"name",i)},expression:"institution.name"}})],1),e("v-uni-view",{staticClass:"p label reuired"},[t._v("3.机构地址")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("请输入机构详细地址，便于物资配送")]),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("省市区：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/area.svg"}}),e("v-uni-input",{attrs:{placeholder:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openAddres.apply(void 0,arguments)}},model:{value:t.pickerText,callback:function(i){t.pickerText=i},expression:"pickerText"}})],1)],1),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("详细地址：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/xxdz.svg"}}),e("v-uni-input",{attrs:{placeholder:""},model:{value:t.institution.address,callback:function(i){t.$set(t.institution,"address",i)},expression:"institution.address"}})],1)],1),e("v-uni-view",{staticClass:"p label reuired"},[t._v("4.机构证明")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("您可以上传可以证明需求真实可靠的照片或截图")]),e("v-uni-view",{staticClass:"p my_item"},[e("fileUpload",{ref:"fileUpload"})],1),e("v-uni-view",{staticClass:"p title"},[t._v("二、防疫物资需求信息")]),e("v-uni-view",{staticClass:"p label reuired"},[t._v("5.物资需求背景说明")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("请简要介绍你所在的机构，并描述物资需求的")]),e("v-uni-view",{staticClass:"my_item"},[e("v-uni-textarea",{staticClass:"my_textarea",attrs:{placeholder:""},model:{value:t.description,callback:function(i){t.description=i},expression:"description"}})],1),e("v-uni-view",{staticClass:"p label reuired"},[t._v("6.物资清单  【最少选择1项】")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("请选择需要的物资，在后面填写需要的物资数量")]),t._l(t.materialList,function(i,a){return e("v-uni-view",{key:a,staticClass:"wz",class:t.materialList.length-1===a?"border_bottom":""},[e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("物资名称：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/jzwz.svg"}}),e("v-uni-input",{attrs:{readonly:!0,placeholder:""},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.openMaterial(a)}},model:{value:i.name,callback:function(e){t.$set(i,"name",e)},expression:"item.name"}})],1)],1),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("捐赠数量：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/number.svg"}}),e("v-uni-input",{attrs:{placeholder:""},model:{value:i.value,callback:function(e){t.$set(i,"value",e)},expression:"item.value"}})],1)],1),e("v-uni-view",{staticClass:"del"},[e("v-uni-image",{attrs:{src:"../../static/demandRelease/del.svg"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.del(a)}}})],1)],1)}),e("v-uni-button",{staticClass:"cu-btn block line-blue margin-tb-sm lg add",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.add.apply(void 0,arguments)}}},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/add.svg"}}),t._v("添加一项")],1),e("v-uni-view",{staticClass:"p title"},[t._v("三、物资联系人信息")]),e("v-uni-view",{staticClass:"p label reuired"},[t._v("7.联系人")]),e("v-uni-view",{staticClass:"p remarks"},[t._v("请留下联系方式，便于志愿者进行协助与核对")]),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("联系人：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/dh.svg"}}),e("v-uni-input",{attrs:{placeholder:""},model:{value:t.donee.name,callback:function(i){t.$set(t.donee,"name",i)},expression:"donee.name"}})],1)],1),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("联系电话：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/lxr.svg"}}),e("v-uni-input",{attrs:{placeholder:""},model:{value:t.donee.phone,callback:function(i){t.$set(t.donee,"phone",i)},expression:"donee.phone"}})],1)],1),e("v-uni-view",{staticClass:"p my_item"},[e("v-uni-label",[t._v("微信号：")]),e("v-uni-view",{staticClass:"my_input"},[e("v-uni-image",{staticClass:"input_icon",attrs:{src:"../../static/demandRelease/wx.svg"}}),e("v-uni-input",{attrs:{placeholder:""},model:{value:t.donee.wxNumber,callback:function(i){t.$set(t.donee,"wxNumber",i)},expression:"donee.wxNumber"}})],1)],1),e("v-uni-view",[e("v-uni-button",{staticClass:"cu-btn block bg-blue margin-tb-sm lg commit",attrs:{disabled:t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.commit.apply(void 0,arguments)}}},[t._v("提交")])],1),e("materialSelection",{ref:"materialSelection",on:{getMaterial:function(i){arguments[0]=i=t.$handleEvent(i),t.getMaterial.apply(void 0,arguments)}}}),e("wPicker",{ref:"wPicker",attrs:{mode:"region"},on:{confirm:function(i){arguments[0]=i=t.$handleEvent(i),t.confirm.apply(void 0,arguments)}}})],2)},s=[];e.d(i,"b",function(){return n}),e.d(i,"c",function(){return s}),e.d(i,"a",function(){return a})},6676:function(t,i,e){i=t.exports=e("2350")(!1),i.push([t.i,".body[data-v-49c3f52a]{background:#fff;padding:12px}.body .title[data-v-49c3f52a]{height:20px;text-align:center;font-size:16px;font-family:Alibaba-PuHuiTi-M,Alibaba-PuHuiTi;font-weight:400;margin-top:30px;margin-bottom:15px;color:#f24e4a;line-height:20px}.body .label[data-v-49c3f52a]{height:20px;font-size:16px;margin-top:15px;margin-bottom:8px;font-family:Alibaba-PuHuiTi-M,Alibaba-PuHuiTi;font-weight:400;color:#2c2d2e;line-height:20px}.body .cu-btn[data-v-49c3f52a]{margin-left:10px;margin-right:10px}.body .bg-white[data-v-49c3f52a]{border:1px solid #e0e0e0}.body .remarks[data-v-49c3f52a]{height:17px;font-size:14px;font-family:Alibaba-PuHuiTi-R,Alibaba-PuHuiTi;font-weight:400;margin-bottom:8px;color:#696d71;line-height:17px}.body .wz[data-v-49c3f52a]{position:relative;padding-bottom:10px;padding-top:10px;border-bottom:1px solid #ccc}.body .wz .my_item[data-v-49c3f52a]{width:85%;display:inline-block;margin-top:5px;margin-bottom:5px}.body .wz .del[data-v-49c3f52a]{width:15%;display:inline-block;text-align:center;position:relative;top:-55px}.body .wz .del uni-image[data-v-49c3f52a]{width:26px;height:26px}.body .border_bottom[data-v-49c3f52a]{border-bottom:none}.body .add[data-v-49c3f52a]{position:relative;border:1px dashed #e0e0e0;color:#ccc}.body .add uni-image[data-v-49c3f52a]{width:14px;height:14px;border:1px dashed #ccc;position:relative;left:-10px;top:-1px}.body .add[data-v-49c3f52a]:after{border:0}.body .my_item[data-v-49c3f52a]{min-height:32px;line-height:32px;position:relative;margin-top:10px;margin-bottom:10px}.body .my_item uni-label[data-v-49c3f52a]{position:absolute;top:0;font-size:14px;width:70px;color:#696d71;display:inline-block}.body .my_item .input_icon[data-v-49c3f52a]{width:22px;height:22px;position:absolute}.body .my_item .my_input[data-v-49c3f52a]{position:absolute;right:0;width:calc(100% - 70px);padding:5px;height:32px;border:1px solid #ccc;border-radius:5px;display:inline-block}.body .my_item .my_input uni-input[data-v-49c3f52a]{padding-left:27px}.body .my_item .my_textarea[data-v-49c3f52a]{width:100%;padding:5px;border:1px solid #ccc;display:inline-block}.body .my_item .my_input_l[data-v-49c3f52a]{width:100%;padding:5px;height:32px;border:1px solid #ccc;display:inline-block}.body .commit[data-v-49c3f52a]{margin-top:45px}.label.reuired[data-v-49c3f52a]{margin-left:15px}",""])},badb:function(t,i,e){"use strict";var a=e("cace"),n=e.n(a);n.a},bfb3:function(t,i,e){t.exports=e("4dc9")},cace:function(t,i,e){var a=e("6676");"string"===typeof a&&(a=[[t.i,a,""]]),a.locals&&(t.exports=a.locals);var n=e("4f06").default;n("ad5ef41e",a,!0,{sourceMap:!1,shadowMode:!1})}}]);