(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-wuliu_status-wuliu_status"],{1049:function(t,i,a){"use strict";(function(t){var e=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0;var n=e(a("795b")),s=a("68f7"),o={data:function(){return{imgList:[],imgSrc:[],token:null}},mounted:function(){var t=this;(0,s.fetch)("/system/getUploadToken",{},"GET","JSON",function(i){t.token=i})},methods:{getImgs:function(){return this.imgSrc},ChooseImage:function(){var i=this;uni.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(a){0!=i.imgList.length?i.imgList=i.imgList.concat(a.tempFilePaths):i.imgList=a.tempFilePaths;var e=a.tempFilePaths,o=(new Date).getTime()+(0,s.getRandomAlphaNum)(15)+a.tempFiles[0].name;function u(t){return new n.default(function(i,a){var e=new XMLHttpRequest;e.open("GET",t,!0),e.responseType="blob",e.onload=function(t){if(200==this.status){var a=this.response;i(a)}},e.send()})}u(e).then(function(a){e=a,uni.request({method:"GET",url:"http://47.113.115.120:8050/",success:function(t){(0,s.uploadFile)(t.data,e,o,function(t){i.imgSrc.push(t)},function(t){uni.showToast({title:"上传失败",icon:"none",duration:1e3})})},fail:function(i){t.log(i)}})},function(t){})}})},ViewImage:function(t){uni.previewImage({urls:this.imgList,current:t.currentTarget.dataset.url})},DelImg:function(t){var i=this;uni.showModal({title:"删除",content:"确定删除吗？",cancelText:"取消",confirmText:"确定",success:function(a){a.confirm&&(i.imgList.splice(t.currentTarget.dataset.index,1),i.imgSrc.splice(t.currentTarget.dataset.index,1))}})}}};i.default=o}).call(this,a("5a52")["default"])},"3bde":function(t,i,a){"use strict";a.r(i);var e=a("cc5b"),n=a("70bf");for(var s in n)"default"!==s&&function(t){a.d(i,t,function(){return n[t]})}(s);var o=a("f0c5"),u=Object(o["a"])(n["default"],e["a"],e["b"],!1,null,"90549cec",null);i["default"]=u.exports},"3f5c":function(t,i,a){"use strict";a.r(i);var e=a("d5fc"),n=a.n(e);for(var s in e)"default"!==s&&function(t){a.d(i,t,function(){return e[t]})}(s);i["default"]=n.a},6744:function(t,i,a){"use strict";var e=a("e4c1"),n=a.n(e);n.a},"6ba7":function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"wuliu_status"},[a("v-uni-view",{staticClass:"item item1"},[a("v-uni-view",{staticClass:"title"},[t._v("收件机构信息")]),a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"content-wrap"},[a("v-uni-view",{staticClass:"name"},[t._v("收件机构信息")]),a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.item&&t.item.instName))])],1),a("v-uni-view",{staticClass:"content-wrap"},[a("v-uni-view",{staticClass:"name"},[t._v("配送地址")]),a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.item&&t.item.address))])],1),a("v-uni-view",{staticClass:"content-wrap"},[a("v-uni-view",{staticClass:"name"},[t._v("收件人")]),a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.item&&t.item.recipient))])],1),a("v-uni-view",{staticClass:"content-wrap"},[a("v-uni-view",{staticClass:"name"},[t._v("联系电话")]),a("v-uni-view",{staticClass:"value"},[t._v(t._s(t.item&&t.item.tel))])],1)],1)],1),a("v-uni-view",{staticClass:"gap"}),a("v-uni-view",{staticClass:"item item2"},[a("v-uni-view",{staticClass:"title"},[t._v("捐赠物资信息")]),a("v-uni-view",{staticClass:"content"},t._l(t.materialList,function(i,e){return a("v-uni-view",{key:e,staticClass:"content-wrap"},[a("v-uni-view",{attrs:{cla:!0,ss:"name"}},[t._v(t._s(i.name))]),a("v-uni-view",{staticClass:"value"},[t._v(t._s(i.value))])],1)}),1)],1),a("v-uni-view",{staticClass:"gap"}),a("v-uni-view",{staticClass:"item item3"},[a("v-uni-view",{staticClass:"content"},[a("v-uni-view",{staticClass:"title"},[t._v("选择您的配送方式")]),a("v-uni-view",{staticClass:"method"},[a("v-uni-button",{class:1===t.status?"activaBtn":"",attrs:{type:"primary"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.status=1}}},[t._v("常规物流")]),a("v-uni-button",{class:2===t.status?"activaBtn":"",attrs:{type:"default"},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.status=2}}},[t._v("其他方式")])],1),1===t.status?a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"p label reuired"},[t._v("物流单号")]),a("v-uni-view",{staticClass:"p remarks"},[t._v("请输入您发送快递/物流的单号")]),a("v-uni-view",{staticClass:"p my_item"},[a("v-uni-input",{staticClass:"my_input_l",attrs:{placeholder:"13425354"},model:{value:t.logisticCode,callback:function(i){t.logisticCode=i},expression:"logisticCode"}})],1),a("v-uni-view",{staticClass:"p label reuired"},[t._v("上传寄件单【最多上传9张】")]),a("v-uni-view",{staticClass:"p remarks"},[t._v("请拍下寄件单上传，方便核查")]),a("v-uni-view",{staticClass:"p my_item"},[a("fileUpload",{ref:"fileUpload"})],1)],1):2===t.status?a("v-uni-view",{staticClass:"body"},[a("v-uni-view",{staticClass:"p label reuired"},[t._v("我的计划")]),a("v-uni-view",{staticClass:"p remarks"},[t._v("在此处填写您计划如何将物资送达")]),a("v-uni-view",{staticClass:"my_item"},[a("v-uni-textarea",{staticClass:"my_textarea",attrs:{placeholder:"我计划……"},model:{value:t.remark,callback:function(i){t.remark=i},expression:"remark"}})],1)],1):t._e(),a("v-uni-view",{staticClass:"confirm"},[a("v-uni-button",{attrs:{type:"primary",disabled:t.disabled},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.commit.apply(void 0,arguments)}}},[t._v("确认收货")])],1)],1)],1)],1)},n=[];a.d(i,"a",function(){return e}),a.d(i,"b",function(){return n})},"70bf":function(t,i,a){"use strict";a.r(i);var e=a("1049"),n=a.n(e);for(var s in e)"default"!==s&&function(t){a.d(i,t,function(){return e[t]})}(s);i["default"]=n.a},"8d9c":function(t,i,a){i=t.exports=a("2350")(!1),i.push([t.i,'.body[data-v-63fa4b95]{background:#fff;padding:12px}.body .title[data-v-63fa4b95]{height:20px;text-align:center;font-size:16px;font-family:Alibaba-PuHuiTi-M,Alibaba-PuHuiTi;font-weight:400;margin-top:30px;margin-bottom:15px;color:#f24e4a;line-height:20px}.body .label[data-v-63fa4b95]{height:20px;font-size:16px;margin-top:15px;margin-bottom:8px;font-family:Alibaba-PuHuiTi-M,Alibaba-PuHuiTi;font-weight:400;color:#2c2d2e;line-height:20px}.body .cu-btn[data-v-63fa4b95]{margin-left:10px;margin-right:10px}.body .bg-white[data-v-63fa4b95]{border:1px solid #e0e0e0}.body .remarks[data-v-63fa4b95]{height:17px;font-size:14px;font-family:Alibaba-PuHuiTi-R,Alibaba-PuHuiTi;font-weight:400;margin-bottom:8px;color:#696d71;line-height:17px}.body .wz[data-v-63fa4b95]{position:relative;padding-bottom:10px;padding-top:10px;border-bottom:1px solid #ccc}.body .wz .my_item[data-v-63fa4b95]{width:85%;display:inline-block;margin-top:5px;margin-bottom:5px}.body .wz .del[data-v-63fa4b95]{width:15%;display:inline-block;text-align:center;position:relative;top:-55px}.body .wz .del uni-image[data-v-63fa4b95]{width:26px;height:26px}.body .border_bottom[data-v-63fa4b95]{border-bottom:none}.body .add[data-v-63fa4b95]{position:relative;border:1px dashed #e0e0e0;color:#ccc}.body .add uni-image[data-v-63fa4b95]{width:14px;height:14px;border:1px dashed #ccc;position:relative;left:-10px;top:-1px}.body .add[data-v-63fa4b95]:after{border:0}.body .my_item[data-v-63fa4b95]{min-height:32px;line-height:32px;position:relative;margin-top:10px;margin-bottom:10px}.body .my_item uni-label[data-v-63fa4b95]{position:absolute;top:0;font-size:14px;width:70px;color:#696d71;display:inline-block}.body .my_item .input_icon[data-v-63fa4b95]{width:22px;height:22px;position:absolute}.body .my_item .my_input[data-v-63fa4b95]{position:absolute;right:0;width:calc(100% - 70px);padding:5px;height:32px;border:1px solid #ccc;border-radius:5px;display:inline-block}.body .my_item .my_input uni-input[data-v-63fa4b95]{padding-left:27px}.body .my_item .my_textarea[data-v-63fa4b95]{width:100%;padding:5px;border:1px solid #ccc;display:inline-block}.body .my_item .my_input_l[data-v-63fa4b95]{width:100%;padding:5px;height:32px;border:1px solid #ccc;display:inline-block}.body .commit[data-v-63fa4b95]{margin-top:45px}.p.label.reuired[data-v-63fa4b95]{margin-left:5px}.wuliu_status[data-v-63fa4b95]{color:#444;font-size:13px;background-color:#fff}.wuliu_status .item[data-v-63fa4b95]{width:95%;margin:auto;padding:10px 0}.wuliu_status .title[data-v-63fa4b95]{padding:10px 0;font-size:15px}.wuliu_status .title[data-v-63fa4b95]:before{content:"";display:inline-block;width:3px;height:15px;background-color:#1e90ff;vertical-align:middle;margin-right:8px}.wuliu_status .content .content-wrap[data-v-63fa4b95]{display:-webkit-box;display:-webkit-flex;display:flex;-webkit-box-pack:justify;-webkit-justify-content:space-between;justify-content:space-between;margin:8px 0}.wuliu_status .content .content-wrap .name[data-v-63fa4b95]{color:grey}.wuliu_status .gap[data-v-63fa4b95]{background-color:#f5f7f7;height:10px}.wuliu_status .item2 .content .content-wrap .name[data-v-63fa4b95]{color:#444}.wuliu_status .item3 .content .method[data-v-63fa4b95]{margin-top:10px}.wuliu_status .item3 .content .method .activaBtn[data-v-63fa4b95]{color:#fff;background:#3d90ff;border:1px solid #3d90ff}.wuliu_status .item3 .content .method uni-button[data-v-63fa4b95]{margin-left:15px;display:inline-block;width:86px;height:33px;font-size:14px;font-family:Alibaba-PuHuiTi-R,Alibaba-PuHuiTi;font-weight:400;color:#fff;background:#fff;border-radius:2px;color:#000;border:1px solid #e0e0e0}.wuliu_status .item3 .content .body .p.label[data-v-63fa4b95]{font-size:14px}.wuliu_status .item3 .content .other[data-v-63fa4b95]{line-height:36px;text-align:center;background-color:#f5f7f7;color:grey}.wuliu_status .item3 .content .confirm[data-v-63fa4b95]{margin-top:40px}.wuliu_status .item3 .content .confirm uni-button[data-v-63fa4b95]{line-height:36px;font-size:16px;background-color:#3c91ff}.wuliu_status .item3 .content .content-wrap .value[data-v-63fa4b95]{display:-webkit-box;display:-webkit-flex;display:flex}.wuliu_status .item3 .content .content-wrap .value .copy[data-v-63fa4b95]{margin-left:5px;height:18px;width:30px;font-size:12px;border:1px solid #ddd;border-radius:4px;text-align:center}',""])},cc5b:function(t,i,a){"use strict";var e=function(){var t=this,i=t.$createElement,a=t._self._c||i;return a("v-uni-view",{staticClass:"grid col-4 grid-square flex-sub"},[t._l(t.imgList,function(i,e){return a("v-uni-view",{key:e,staticClass:"bg-img",attrs:{"data-url":t.imgList[e]},on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ViewImage.apply(void 0,arguments)}}},[a("v-uni-image",{attrs:{src:t.imgList[e],mode:"aspectFill"}}),a("v-uni-view",{staticClass:"cu-tag bg-red",attrs:{"data-index":e},on:{click:function(i){i.stopPropagation(),arguments[0]=i=t.$handleEvent(i),t.DelImg.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-close"})],1)],1)}),t.imgList.length<4?a("v-uni-view",{staticClass:"solids",on:{click:function(i){arguments[0]=i=t.$handleEvent(i),t.ChooseImage.apply(void 0,arguments)}}},[a("v-uni-text",{staticClass:"cuIcon-cameraadd"})],1):t._e()],2)},n=[];a.d(i,"a",function(){return e}),a.d(i,"b",function(){return n})},d5fc:function(t,i,a){"use strict";var e=a("288e");Object.defineProperty(i,"__esModule",{value:!0}),i.default=void 0,a("28a5");var n=a("68f7"),s=e(a("3bde")),o={components:{fileUpload:s.default},data:function(){return{status:1,hashCode:null,item:{},materialList:[],picList:[],remark:"",logisticCode:"",disabled:!1}},mounted:function(){this.hashCode=this.getHashParameter("hashCode"),this.getDEtail()},onLoad:function(){},methods:{toPath:n.toPath,timestampToTime:n.timestampToTime,goHome:function(){uni.navigateBack()},verific1:function(){return this.logisticCode?!(this.picList.length<=0)||(uni.showToast({icon:"none",title:"请上传图片"}),!1):(uni.showToast({icon:"none",title:"请输入物流单号"}),!1)},verific2:function(){return!!this.remark||(uni.showToast({icon:"none",title:"请填写计划"}),!1)},commit:function(){var t=!1,i={matchOrder:this.item.matchOrderId};if(1===this.status?(this.picList=this.$refs.fileUpload.getImgs(),t=this.verific1(),i.picList=this.picList,i.logisticCode=this.logisticCode,i.remark=null):2===this.status&&(i.remark=this.remark,i.picList=null,i.logisticCode=null,t=this.verific2()),!t)return!1;(0,n.fetchPost)("matchOrder/updateLogisticInfo",i).then(function(t){uni.showToast({icon:"none",title:"物流信息补充成功"})})},getDEtail:function(){var t=this;(0,n.fetchGet)("/matchOrder/getInstAndMaterialInfoByHash",{hashCode:this.hashCode}).then(function(i){t.item=i,t.materialList=i.materialNameList.map(function(t,a){return{name:t,value:i.materialQuantityList[a]}})})},getHashParameters:function(){for(var t=(location.hash||"").split("?")[1].split("&"),i={},a=0;a<t.length;a++){var e=t[a].split("=");2===e.length&&(i[e[0]]=e[1])}return i},getHashParameter:function(t){var i=this.getHashParameters();return i[t]}}};i.default=o},d7bc:function(t,i,a){"use strict";a.r(i);var e=a("6ba7"),n=a("3f5c");for(var s in n)"default"!==s&&function(t){a.d(i,t,function(){return n[t]})}(s);a("6744");var o=a("f0c5"),u=Object(o["a"])(n["default"],e["a"],e["b"],!1,null,"63fa4b95",null);i["default"]=u.exports},e4c1:function(t,i,a){var e=a("8d9c");"string"===typeof e&&(e=[[t.i,e,""]]),e.locals&&(t.exports=e.locals);var n=a("4f06").default;n("17027b7c",e,!0,{sourceMap:!1,shadowMode:!1})}}]);